extends ../layout/index.pug

block styles
    link(rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css")

block contenido
    div(class="min-h-screen bg-gray-100 flex flex-col")
        include ../usuario/comprador-Sidebar/compradorSidebar.pug
        //- Contenido Principal
        main(class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8")
            //- Encabezado y Filtros
            div(class="p-6 mb-8")
                div(class="text-center mb-6")
                    h1(class="text-3xl font-bold text-[#FF6819]") Encuentra tu Propiedad Ideal
                    p(class="mt-2 text-gray-600") Explora propiedades en el mapa y encuentra el lugar perfecto para ti

                //- Filtros
                div(class="grid grid-cols-1 md:grid-cols-4 gap-4")
                    //- Filtro de Categoría
                    div(class="flex flex-col")
                        label(for="categorias" class="block text-sm font-medium text-gray-700 mb-1") Categoría
                        select(name="categorias" id="categoria" class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-[#FF6819] focus:ring-[#FF6819] sm:text-sm")
                            option(value=""  selected) Seleccionar Categoría
                            each categoria in categorias
                                option(value=categoria.id)= categoria.nombre

                    //- Filtro de Habitaciones
                    div(class="flex flex-col")
                        label(for="habitaciones" class="block text-sm font-medium text-gray-700 mb-1") Habitaciones
                        select(name="habitaciones" id="habitaciones" class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-[#FF6819] focus:ring-[#FF6819] sm:text-sm")
                            option(value="" selected) Seleccionar
                            option(value="1") 1 Habitación
                            option(value="2") 2 Habitaciones
                            option(value="3") 3 Habitaciones
                            option(value="4") 4 Habitaciones

                    //- Filtro de baños
                    div(class="flex flex-col")
                        label(for="baños" class="block text-sm font-medium text-gray-700 mb-1") Baños
                        select(name="baños" id="baños" class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-[#FF6819] focus:ring-[#FF6819] sm:text-sm")
                            option(value="" selected) Seleccionar
                            option(value="1") 1 Baño
                            option(value="2") 2 Baños
                            option(value="3") 3 Baños

                    //- Filtro de estacionamiento
                    div(class="flex flex-col")
                        label(for="estacionamiento" class="block text-sm font-medium text-gray-700 mb-1") Estacionamiento
                        select(name="estacionamiento" id="estacionamiento" class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-[#FF6819] focus:ring-[#FF6819] sm:text-sm")
                            option(value="" selected) Seleccionar
                            option(value="1") 1 Estacionamiento
                            option(value="2") 2 Estacionamientos
                            option(value="3") 3 Estacionamientos
                   

            //- Mapa
            div(class="bg-white rounded-xl shadow-lg overflow-hidden mb-8")
                div(class="h-[600px] w-full" id="mapa-comprador")

            //- Propiedades
            section(class=" p-8")
                div(class="flex justify-between items-center mb-6")
                    h2(class="text-2xl font-bold text-[#FF6819]") Propiedades Disponibles
                    div(class="flex items-center space-x-2")
                        span(class="text-gray-600 text-sm")= `${propiedades.length} propiedades encontradas`

                div(class="grid grid-cols-1 md:grid-cols-3 gap-6")
                    each propiedad in propiedades
                        article(class="group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden")
                            //- Imagen y categoría
                            div(class="relative h-56 overflow-hidden")
                                img(src=`/uploads/${propiedad.imagen}` class="w-full h-full object-cover ")
                                //- Overlay gradiente
                                div(class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/0 to-black/0 opacity-0 group-hover:opacity-100 transition-opacity duration-300")
                                //- Categoría
                                div(class="absolute top-4 left-4")
                                    span(class="bg-gradient-to-r from-[#FF6819] to-[#FF9F00] text-white px-4 py-1.5 rounded-full text-xs font-medium uppercase shadow-lg")= propiedad.categoriaId ? propiedad.categoriaRelacion.nombre : 'Sin categoría'
                                //- Precio
                                div(class="absolute bottom-4 right-4")
                                    p(class="bg-white/90 backdrop-blur-sm text-gray-600 px-4 py-2 rounded-lg font-bold text-lg shadow-lg") $ #{propiedad.precio.toLocaleString()}

                            //- Contenido
                            div(class="p-5")
                                //- Título
                                h3(class="text-lg font-bold  text-gray-800 mb-4 line-clamp-1")= propiedad.titulo
                                

                                //- Características principales
                                div(class="grid grid-cols-3 gap-4 py-4 border-y border-gray-100")
                                    div(class="flex flex-col items-center text-center")
                                        div(class="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center mb-2 ")
                                            i(class="fas fa-bed text-gray-600")
                                        span(class="text-sm text-gray-600")= `${propiedad.habitaciones} Hab.`
                                    div(class="flex flex-col items-center text-center")
                                        div(class="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center mb-2 ")
                                            i(class="fas fa-bath text-gray-600")
                                        span(class="text-sm text-gray-600")= `${propiedad.wc} Baños`
                                    div(class="flex flex-col items-center text-center")
                                        div(class="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center mb-2 ")
                                            i(class="fas fa-car text-gray-600")
                                        span(class="text-sm text-gray-600")= `${propiedad.estacionamiento} Est.`

                                //- Ubicación y botón
                                div(class="mt-4 flex items-center justify-between")
                                    div(class="flex items-center text-gray-600")
                                        i(class="fas fa-map-marker-alt  mr-2")
                                        span(class="text-sm truncate")= propiedad.calle
                                    a(href=`/propiedades/${propiedad.id}` class="inline-flex items-center text-[#FF6819] hover:text-[#E55A0F] transition-colors duration-200 group-hover:translate-x-1 transition-transform duration-200")
                                        span(class="text-sm font-medium mr-2") Ver detalles
                                        i(class="fas fa-arrow-right")
block scripts
    script(src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js")
    script(src="https://kit.fontawesome.com/your-font-awesome-kit.js" crossorigin="anonymous")
    script(src="/js/mapaComprador.js")

