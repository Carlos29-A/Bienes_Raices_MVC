//- Contenedor principal del chatbot
div(class="fixed bottom-4 right-4 z-[9999] flex items-end gap-4")
    //- Ventana principal del chat
    div(
        id="chatWindow"
        class="hidden bg-white rounded-xl shadow-2xl transition-all duration-300 transform w-[380px] z-50"
        role="dialog"
        aria-labelledby="chatTitle"
    )
        //- Encabezado del chat
        header(
            class="bg-[#FF6819] text-white p-4 rounded-t-xl flex justify-between items-center"
            role="banner"
        )
            //- Información del asistente
            div(class="flex items-center gap-3")
                //- Avatar del asistente
                div(
                    class="bg-white rounded-full p-2 flex items-center justify-center"
                    aria-hidden="true"
                )
                    i(class="fas fa-robot text-[#FF6819] text-xl")
                
                //- Título y estado
                div(class="flex flex-col")
                    h3(
                        id="chatTitle"
                        class="font-semibold"
                    ) Asistente Virtual
                    span(
                        class="text-xs text-orange-200"
                        aria-label="Estado del asistente"
                    ) Siempre disponible

            //- Botón para minimizar
            button(
                id="minimizeChat"
                class="text-white hover:text-gray-200 transition-colors"
                title="Minimizar chat"
                aria-label="Minimizar ventana de chat"
            )
                i(class="fas fa-minus" aria-hidden="true")

        //- Contenedor de mensajes
        main(
            id="respuesta"
            class="bg-gray-50 p-4 overflow-y-auto space-y-4 h-[400px]"
            style="scrollbar-width: thin;"
            role="log"
            aria-label="Historial de mensajes"
        )
            //- Mensaje de bienvenida inicial
            article(
                class="flex items-start gap-2 animate-fade-in"
                role="article"
            )
                //- Avatar del asistente
                div(
                    class="bg-white rounded-full p-2 flex items-center justify-center"
                    aria-hidden="true"
                )
                    i(class="fas fa-robot text-[#FF6819] text-sm")
                
                //- Contenido del mensaje
                div(
                    class="bg-white rounded-lg p-3 shadow-sm max-w-[80%]"
                    role="textbox"
                    aria-label="Mensaje del asistente"
                )
                    //- Saludo
                    p(class="text-gray-800") ¡Hola! Soy tu asistente virtual de Bienes Raíces. ¿En qué puedo ayudarte hoy?
                    
                    //- Texto introductorio
                    p(class="text-gray-600 text-sm mt-1") Puedes preguntarme sobre:
                    
                    //- Lista de temas
                    ul(
                        class="text-gray-600 text-sm mt-1 list-disc list-inside"
                        role="list"
                    )
                        li(role="listitem") Registro e inicio de sesión
                        li(role="listitem") Búsqueda de propiedades
                        li(role="listitem") Funciones de compradores y vendedores
                        li(role="listitem") Sistema de mensajes y más

        //- Formulario de entrada
        footer(class="border-t border-gray-100 p-4 bg-white rounded-b-xl")
            form(
                id="formulario"
                class="flex gap-2 items-end"
                role="form"
                aria-label="Formulario de mensaje"
            )
                //- Contenedor del textarea
                div(class="flex-grow")
                    textarea(
                        id="mensaje"
                        class="w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#FF6819] focus:border-transparent resize-none transition-all min-h-[44px] max-h-[120px]"
                        class="w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#FF6819] focus:border-transparent resize-none transition-all min-h-[44px] max-h-[120px]"
                        rows="1"
                        placeholder="Escribe tu mensaje..."
                        aria-label="Campo de mensaje"
                    )
                
                //- Botón de enviar
                button(
                    id="enviar"
                    type="submit"
                    class="bg-[#FF6819] hover:bg-[#e55b16] text-white rounded-xl p-3 transition-colors duration-300 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed h-[44px] w-[44px]"
                    aria-label="Enviar mensaje"
                )
                    i(class="fas fa-paper-plane" aria-hidden="true")

    //- Botón principal para abrir/cerrar el chat
    button(
        id="toggleChat"
        class="bg-[#FF6819] hover:bg-[#e55b16] text-white rounded-full p-4 shadow-lg transition-all duration-300 transform hover:scale-110 flex items-center justify-center w-14 h-14"
        title="Abrir chat"
        aria-label="Abrir chat con asistente virtual"
    )
        i(class="fas fa-comments text-2xl" aria-hidden="true")

//- Estilos adicionales
style.
    /* Estilo para la barra de desplazamiento */
    #respuesta::-webkit-scrollbar {
        width: 6px;
    }
    #respuesta::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
    }
    #respuesta::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 10px;
    }
    #respuesta::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
    }
    
    /* Animación de fade in para mensajes */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
        animation: fadeIn 0.3s ease-out forwards;
    }

    /* Ajuste automático de altura para el textarea */
    #mensaje {
        overflow-y: hidden;
    } 